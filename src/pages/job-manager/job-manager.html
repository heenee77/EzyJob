<!--
  Generated template for the JobManagerPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <custom-navbar></custom-navbar>
</ion-header>

<ion-content padding>

<ion-grid>
<ion-row>
  <ion-col col-3>

    <ion-grid>
      
      <ion-row col-12>
        <ion-col>
          <button ion-button col-12 (click)="NewJobButton()">New Job</button>
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-card>
          <ion-list>
            <ion-list-header>
              My Jobs - Planned
            </ion-list-header>
    
            <button ion-item *ngFor="let job of plannedJobList" (click)="navigateToJobDetailsPage(job.jobNumber)">
              <a href="#">{{ job.jobNumber }}</a> - {{ job.name }}
            </button>
    
          </ion-list>
        </ion-card>
      </ion-row>

      <ion-row>
        <ion-card>
          <ion-list>

            <ion-list-header>
              My Jobs - Planned
            </ion-list-header>
    
            <button ion-item *ngFor="let job of inProgressJobList" (click)="navigateToJobDetailsPage(job.jobNumber)">
              <a href="#">{{ job.jobNumber }}</a> - {{ job.name }}
            </button>
    
          </ion-list>
        </ion-card>
      </ion-row>

    </ion-grid>

  </ion-col>

  <ion-col col-9>
    <ion-grid>
      <ion-row>
        <ion-card style="width:100%;margin:auto;margin-bottom:30px">
          <ion-grid>
            <ion-row>
              <ion-col>
                <p class="jobTitle">Total</p>
                <p class="jobNumber">{{ jobSummary.total }}</p>
              </ion-col>
              <ion-col>
                <p class="jobTitle">Starting Today</p>
                <p class="jobNumber">{{ jobSummary.startingToday }}</p>
              </ion-col>
              <ion-col>
                <p class="jobTitle">Due This Week</p>
                <p class="jobNumber">{{ jobSummary.dueThisWeek }}</p>
              </ion-col>
              <ion-col>
                <p class="jobTitle">Due Next Week</p>
                <p class="jobNumber">{{ jobSummary.dueNextWeek }}</p>
              </ion-col>
              <ion-col>
                <p class="jobTitle">Overdue</p>
                <p class="jobNumber">{{ jobSummary.overdue }}</p>
              </ion-col>
            </ion-row>
          </ion-grid>
        </ion-card>
      </ion-row>

      <ion-row>
        <div id="table" style="width:100%">
          <header>
            <span style="padding:auto"> 
              <button ion-button color="light" small (click)="filterPressed('all')" no-padding no-margin>
                All
              </button>
              <button ion-button color="light" small (click)="filterPressed('my')" no-padding no-margin>
                My
              </button>
              <button ion-button color="light" small (click)="filterPressed('managedBy')" no-padding no-margin>
                Managed By
              </button>
              <button ion-button color="light" small (click)="filterPressed('importantDates')" no-padding no-margin>
                Important Dates
              </button>
              <button ion-button color="light" small (click)="filterPressed('staffAllocation')" no-padding no-margin>
                Staff Allocation
              </button>
              <button ion-button color="light" small (click)="filterPressed('search')" no-padding no-margin>
                Search
              </button>
              <button ion-button color="light" small (click)="filterPressed('archieve')" no-padding no-margin>
                Archieve
              </button>
              <button ion-button color="light" small (click)="filterPressed('recurring')" no-padding no margin>
                Recurring
              </button>
            </span>
          </header>
          <table class="table">
            <thead>
              <tr>
                <th>!</th>
                <th>Job No.</th>
                <th>Client</th>
                <th>Name</th>
                <th>State</th>
                <th>Start</th>
                <th>Due</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let job of jobList">
                <td>
                  <span *ngIf="job.important"><b>!</b></span>
                </td>
                <td>
                  <a href="#" (click)="navigateToJobDetailsPage(job.jobNumber)">{{ job.jobNumber }}</a>
                </td>
                <td>{{ job.client }}</td>
                <td>{{ job.name }}</td>
                <td>
                  <ion-item>
                    <!-- <ion-label>Job State</ion-label> -->
                    <ion-select [(ngModel)]="job.state">
                      <ion-option value="planned">Planned</ion-option>
                      <ion-option value="inProgress">In Progress</ion-option>
                      <ion-option value="resolved">Resolved</ion-option>
                    </ion-select>
                  </ion-item>
                </td>
                <td>{{ job.startDate.toLocaleDateString() }}</td>
                <td>{{ job.dueDate.toLocaleDateString() }}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </ion-row>
    </ion-grid>
  </ion-col>
</ion-row>
  
<ion-row>
  <h3>{{ jobFilter }}</h3>
</ion-row>
  
</ion-grid>
</ion-content>